## 1. 模块化

### 1.1 js 中的模块化

模块化之后的代码，我们考虑更多的是：代码使用和维护成本的问题。所以有了很多模块化的规范：`CommonJS`、`AMD`和`ES6 Module`规范（另外还有`CMD`、`UMD`等），下面我们来简单看一下：

+ CommonJS：是 Nodejs 广泛使用的一套模块化规范，是一种同步加载模块依赖的方式；

  + `require`：引入一个模块

  + `exports`：导出模块内容

  + `module`：模块本身

    

+ AMD：是 JS 模块加载库

  RequireJS 提出并且完善的一套模块化规范，AMD 是一种异步加载模块依赖的方式；

  + **id**：模块的 id

  + **dependencies**：模块依赖

  + **factory**：模块的工厂函数，即模块的初始化操作函数

  + **require**：引入模块

    

+ ES6 Module ：ES6 推出的一套模块化规范。

  + **import**：引入模块依赖
  + **export**：模块导出



### 1.2 CSS 中的模块化

@import



## 2. 模块化

解决的问题

1. 模块多了，如何管理依赖
2. 页面复杂度提升之后，多页面、多系统、多状态怎么办？
3. 团队扩大之后，团队合作怎么做？
4. 怎么解决多人研发中的性能、代码风格等问题？
5. 如何权衡研发效率和产品迭代的问题？

前端工程化早期，是以 Grunt、Gulp 等构建工具为主的阶段，这个阶段解决的是**重复任务**的问题，它们将某些功能拆解成固定步骤的任务，然后编写工具来解决，比如：图片压缩、地址添加 hash、替换等，都是固定套路的重复工作。

而现阶段的 Webpack 则更像是从一套解决 JavaScript 模块化依赖打包开始，利用强大的插件机制，逐渐解决前端资源依赖管理问题，依附社区力量逐渐进化成一套前端工程化解决方案。



## 3. webpack 解决的问题

1. 按需加载

   Grunt、Gulp 构建思路是：**遍历源文件→匹配规则→打包**，这个过程中做不到按需加载，即对于打包起来的资源，到底页面用不用，打包过程中是不关心的。

   webpack 的构建思路是：**Webpack 是从入口文件开始，经过模块依赖加载、分析和打包三个流程完成项目的构建**。在加载、分析和打包的三个过程中，可以针对性的做一些解决方案，达到按需加载的目的，比如`code split`（拆分公共代码等）。

| 解决问题     | Grunt、Gulp                  | webpack                                       |
| ------------ | ---------------------------- | --------------------------------------------- |
| 打包思路     | **遍历源文件→匹配规则→打包** | **模块依赖加载、分析和打包**                  |
| 按需加载     | 不可以。只能按规则匹配       | 可以。在加载、分析、打包中针对性的解决问题    |
| 模块化       |                              | 一切皆模块。包括 JS、CSS                      |
| 语法糖装换   |                              | ES6 ➡️ ES5，TypeScript                         |
| 预处理器编译 |                              | Less、Sass                                    |
| 项目优化     |                              | 压缩、CDN                                     |
| 解决方案封装 |                              | Loader 和插件机制，完成解决方案的封装。如 PWA |
| 流程对接     |                              | 测试流程（ Jest ）、语法转换（ babel ）       |



> 本小节 Webpack 相关面试题：

> 1. Webpack 与 Grunt、Gulp 这类打包工具有什么不同？
>
>    webpack 是面向 js 模块的打包工具，而 Grunt、Gulp 是面向规则和流程的打包工具



> 2. 与 Webpack 类似的工具还有哪些？谈谈你为什么选择（或放弃）使用 Webpack？
>
>    打包逻辑上容易理解，封装好

